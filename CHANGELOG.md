# Changelog

All notable changes to this project will be documented in this file.

## [unreleased]

### 🚀 Features

- Refactored llm/tts models used
- Implemented chat templates for ai chatbot + refactoring
- Added debug-command
- Optimized quote-handling with added parallelization
- Reuse text_layout for quotes
- Enable zstd transport compression + disable inline feature for dashmap
- Purged use of unwrap() & expect(), unchecked array indexing and calculations with possible side effects
- Reuse allocated action_rows
- Implemented shard shutdown on ctrl+c
- Allow user to queue shard for restart using /debug-command
- Random gis when using /gif-command as an user app
- Add context menu command to respond to messages
- Update deps & WIP implementing V2-components
- Migrated to workspace structure
- Replaced opentelemetry with victoriametrics
- Count command usage
- Split larger functions + provide buttons for control for music playback + use separate voice_manager with decode-support for voice packets
- Improved user interface for music playback
- Added lyrics & history buttons to music embed
- Support for youtube playlists
- Make text_to_voice work with input + overview of commands on join_voice
- Separate play_song-command for global playback
- Less cache-overhead by removing Arc & Mutex wrapping it
- Track_metadata moved to DashMap
- Take ownerships of structs instead of cloning
- WIP global music playback
- Callback for driver & client disconnect + global pause/unpause & stop
- Track playback ending
- Listen to song requests in a channel
- WIP help-command & custom-ish themes for quote-command
- WIP unified server settings command + switched to mimalloc (in testing)
- Auto-generate CHANGELOG.md
- Separate task for timed user events
- Updated deps + WIP impls for db-calls

### 🐛 Bug Fixes

- Registered register_commands-command...
- Removed max_tokens on simple ai requests
- Separate channel names by comma
- Add current channel to context of chatbot
- Removed temp file
- No need for chat templates when using openai-compatible api
- Avoid println + removed temp_cache
- Clippy lints + add timestamp to ai-chats
- Check for missing guild ids
- Optimize generating text layout, custom fonts still need refactor
- Update textlayout for new fonts
- Parse message links for messages that have other content in it
- Correct text placement in quotes
- Truncate urban dict example to 1024 characters
- Log error associated with music seeking
- Remove button on /debug-command after timeout
- Empty song info when finished
- Handle no lyrics or history found
- Lyrics isn't shown when history is shown and vice versa
- Removed redundant checks
- Cleaned up voice_check
- Keep locks for duration of ai-chatbot command
- Don't toggle transport compression manually
- Don't join twice on join_voice
- Don't join if already in a voice channel
- Playbackhandler only trigger on playable-sources
- Include overview of commands on join_voice_global
- Use existing handler when skipping
- Add tti to channel_webhooks + removed tracks as they are done
- Prune track_metadata only on leave
- Longer duration for interactioncollector on music playback
- Wait till song have ended before despawning task
- Don't spawn new tasks when seeking song
- Don't print changelog
- Workspace features doesn't pass down to bins
- Panic-immediate-abort is unstable
- Panic_immediate_abort no longer a std-feature
- Added aac codec and handle guilds whose id is not stored
- Patch audiopus_sys to be compatible with cmake version > 4 + remove impl of GuildDataMap

### 💼 Other

- Only deletes message if run as prefix-command
- Testing global call

### ⚙️ Miscellaneous Tasks

- Rustfmt
- Function splitting
- Update documentation
- Unused import

<!-- generated by git-cliff -->
